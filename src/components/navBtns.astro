---
const navButtons = [
  {
    name: "Sobre Mi",
    link: "#about",
  },
  {
    name: "Intereses",
    link: "#interests",
  },
  {
    name: "Contacto",
    link: "#contact",
  },
];
---

<ul class="flex gap-14">
  {
    navButtons.map((button) => (
      <li class="flex items-center gap-2 hover:text-purple transition">
        <a class="font-medium text-[15px] nav-btn" href={button.link}>
          {button.name}
        </a>
      </li>
    ))
  }
</ul>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const sections = document.querySelectorAll("section");
    const navBtns = document.querySelectorAll(".nav-btn");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          const currentSection = entry.target.id;

          if (entry.isIntersecting) {
            navBtns.forEach((btn) => {
              const href = btn.getAttribute("href")?.substring(1); // Obtén el id correspondiente al botón
              if (href === currentSection) {
                btn.classList.add("active");
              } else {
                btn.classList.remove("active");
              }
            });
          }
        });
      },
      { threshold: 0.5 } // Detecta cuando el 50% de la sección está visible
    );

    sections.forEach((section) => observer.observe(section));
  });
</script>

<style>
  .nav-btn {
    color: black;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .nav-btn.active {
    background-color: #a037ee;
    color: white;
    padding: 3px 18px;
    border-radius: 20px;
  }
</style>
